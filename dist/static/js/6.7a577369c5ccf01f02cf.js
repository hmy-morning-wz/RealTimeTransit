webpackJsonp([6],{"0OY/":function(t,e){},FqY8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("Xxa5"),o=a.n(n),l=a("exGp"),c=a.n(l),r=a("bzuE"),d={components:{Banner:a("YV7O").a},data:function(){var t=this.$parent.store.get("location")||{};return{stationLists:[],latitude:t.latitude||r.a.CITY_MAP_CENTER[1],longitude:t.longitude||r.a.CITY_MAP_CENTER[0],gpsLocated:!1,cityCode:r.a.CITY_ID,pageCode:"610300001",banderUrl:r.a.baseBannerURL+"tcapp/ads/classify"}},methods:{handleStationList:function(t,e){window.location.href="#/searchLineDetails?stationId="+t+"&stationName="+e},handleLineDetail:function(t,e,a,i){window.location.href="#/lineDetails?lineName="+i.lineNo+"&lineId="+i.gprsId+"&stationName="+a+"&direction="+e},getStation:function(){var t=this;return c()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.yl.call("showLoading",{content:"加载中…",duration:15e3},{onSuccess:function(t){},onFail:function(t){}}),e.next=3,t.$parent.request({url:"station/detail_list?lng="+(t.longitude||t.$route.query.lng)+"&lat="+(t.latitude||t.$route.query.lat)+"&limit_distance=500&city_code="+t.cityCode});case 3:(a=e.sent)&&a.success&&(t.stationLists=a),window.yl.call("hideLoading");case 6:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this.$route.query.lng,e=this.$route.query.lat;t&&e&&(this.gpsLocated=!0,this.latitude=e,this.longitude=t),window.yl.call("setTitleBarRightButton",{rightButtonShow:!0,rightButtonTextOpen:!0,rightButtonText:"换乘查询"},{onSuccess:function(){location.href="#/transfer"},onFail:function(t){alert("fail")}});var a=this;window.yl.call("setTitleBarText",{title:"附近站点"}),a.gpsLocated?a.getStation():window.yl.call("getLocation",{},{onSuccess:function(t){if(t.param){a.latitude=t.param.latitude,a.longitude=t.param.longitude;var e={latitude:a.latitude,longitude:a.longitude};a.$parent.store.set("location",s()(e)),a.gpsLocated=!0,a.getStation()}},onFail:function(t){alert("获取地理位置失败")}})},mounted:function(){var t=this;setTimeout(function(){t.gpsLocated||t.getStation()},1e3)}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-line"},[t._m(0),t._v(" "),a("div",{staticClass:"show-station"},[t.stationLists.length>0?a("div",{staticClass:"search-lists"},t._l(t.stationLists,function(e,i){return a("div",{key:i,staticClass:"search-list"},[a("div",{staticClass:"search-list-left"},[a("span",{staticClass:"icon"}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.lineCarInformationList,function(s,n){return a("div",{key:n,attrs:{seed:"handleLineDetail"},on:{click:function(a){t.handleLineDetail(i,e.direction,e.name,s)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:s.index>0,expression:"line.index>0"}],staticClass:"line"}),t._v(" "),a("div",{staticClass:"line-box",attrs:{"data-expo":s.lineNo}},[a("div",{staticClass:"box-left",attrs:{div:""}},[a("div",{staticClass:"text2"},[t._v(t._s(s.lineNo))]),t._v(" "),a("div",{staticClass:"text3"},[t._v("开往 "+t._s(s.destination))])]),t._v(" "),a("div",{staticClass:"box-right"},[a("span",{directives:[{name:"show",rawName:"v-show",value:s.count>0,expression:"line.count > 0"}],staticClass:"text2"},[a("span",[t._v("距离")]),t._v(" "),a("span",{staticClass:"text1"},[t._v(t._s(s.count))]),a("span",[t._v("站")])]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0===s.count,expression:"line.count===0"}],staticClass:"text1"},[t._v("即将到站")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:s.count<0,expression:"line.count<0"}],staticClass:"text2"},[t._v("首站暂未发车")])])])])})],2)}),0):a("div",{staticClass:"no-infos"},[a("div",{staticClass:"no-info"}),t._v(" "),a("div",{staticClass:"no-info-text"},[t._v("附近暂无公交路线信息")]),t._v(" "),a("div",{staticClass:"no-info2"})])]),t._v(" "),a("banner",{staticClass:"my-banner",attrs:{"page-code":t.pageCode,"city-code":t.cityCode,url:t.banderUrl,size:10}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"search-bar",attrs:{href:"#/lineLists"}},[e("div",{staticClass:"search-inp"},[this._v("搜线路")]),this._v(" "),e("div",{staticClass:"search-icon"}),this._v(" "),e("div",{staticClass:"search-text"},[this._v("查询")])])}]};var v=a("VU/8")(d,u,!1,function(t){a("0OY/")},"data-v-457a3ee6",null);e.default=v.exports}});
//# sourceMappingURL=6.7a577369c5ccf01f02cf.js.map