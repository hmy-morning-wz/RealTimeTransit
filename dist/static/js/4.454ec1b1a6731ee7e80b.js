webpackJsonp([4],{"2QH8":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),i=s.n(r),c=s("mvHQ"),o=s.n(c),l=s("Dd8w"),h=s.n(l),u=s("NYxO"),v={name:"search",data:function(){return{search:""}},directives:{focus:{inserted:function(e){e.focus()}}},methods:{handleClean:function(){this.clearSearch(),this.$emit("clean-search","")},handleCancel:function(){this.$router.go(-1)},clearSearch:function(){this.search=""}},watch:{search:function(e){this.$emit("handle-search",e)}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-bar"},[s("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"input",staticClass:"search-inp",attrs:{name:"search",autofocus:"",maxlength:"20",placeholder:"搜线路"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),s("div",{staticClass:"search-icon"}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.search.length,expression:"search.length"}],staticClass:"search-delete",on:{click:e.handleClean}}),e._v(" "),s("div",{staticClass:"search-text",on:{click:e.handleCancel}},[e._v("取消")])])},staticRenderFns:[]};var f={components:{cSearch:s("VU/8")(v,m,!1,function(e){s("MKQ7")},"data-v-71944a12",null).exports},data:function(){return{isFrom:"",isEmpty:!1,value:"",result:[],type:"",searchList:this.$parent.getSearchHistory()}},computed:h()({},Object(u.b)(["city"])),methods:{backHref:function(e){location.href="#/transfer?value="+e.name+"&type="+this.type+"&detail="+o()(e)},removeHistory:function(){this.$parent.clearHistory(),this.searchList=[]},onClean:function(){this.value="",this.result=[]},onSearch:function(e){var t=this;return i()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$parent.request({baseURL:"https://restapi.amap.com",withCredentials:!1,url:"/v3/assistant/inputtips?key=5d1564203934a57a268d0ef563babc03&keywords="+e+"&city="+t.city+"&citylimit="+!0});case 2:(a=s.sent).length?(t.result=a,t.isEmpty=!1):t.isEmpty=!0;case 5:case"end":return s.stop()}},s,t)}))()}},created:function(){this.type=this.$route.query.type,this.isFrom=this.$route.query.from}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex-container flex flex-column"},[s("c-search",{attrs:{search:e.value},on:{"clean-search":e.onClean,"handle-search":e.onSearch}}),e._v(" "),e._l(e.result,function(t,a){return s("a",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],key:a,staticClass:"seach-item search-cell flex",attrs:{href:"#/transfer?from="+e.isFrom+"&value="+t.name+"&type="+e.type+"&detail="+JSON.stringify(t)}},[s("span",[e._v(e._s(t.name))]),e._v(" "),s("span",[e._v(e._s(t.district))])])}),e._v(" "),e.result.length?e._e():s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"history"},[e._l(e.searchList,function(t,a){return s("div",{key:a,attrs:{seed:"backHref"},on:{click:function(s){e.backHref(t)}}},[s("div",{staticClass:"seach-item"},[e._v(e._s(t.name))])])}),e._v(" "),s("p",{on:{click:e.removeHistory}},[e._v("清除搜索历史")])],2),e._v(" "),e.isEmpty?s("div",{staticClass:"empty"},[e._v("\n      没搜到结果? 换个词试试\n   ")]):e._e()],2)},staticRenderFns:[]};var p=s("VU/8")(f,d,!1,function(e){s("xs/H")},"data-v-365862bf",null);t.default=p.exports},MKQ7:function(e,t){},"xs/H":function(e,t){}});
//# sourceMappingURL=4.454ec1b1a6731ee7e80b.js.map