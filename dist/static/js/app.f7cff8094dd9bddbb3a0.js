webpackJsonp([10],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a=n("Xxa5"),o=n.n(a),i=n("exGp"),c=n.n(i),s=n("mvHQ"),u=n.n(s),l=n("Gu7T"),f=n.n(l),p=n("//Fk"),d=n.n(p),h=n("X2Oc"),m=n("woOf"),y=n.n(m),S=n("mtWM"),v=n.n(S),g=n("bzuE");function b(t){var e="";switch(t.code||t.status){case"0":(e=t.data)&&"string"!=typeof e&&(e.success=!0);break;case"1":e=t.tips;break;case"200":case"20000":case"40004":case"20":e=t}return e}var O,w=(O=c()(o.a.mark(function t(e){var n,r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},(r=y()({baseURL:g.a.baseURL,method:"GET",queryString:"",timeout:3e4,headers:{"Content-Type":"application/json; charset=UTF-8"}},e)).url=r.baseURL+r.url,a=new d.a(function(t,e){v()(r).then(function(e){t(e)}).catch(function(t){e(t)})}),t.next=6,a.then(function(t){200===t.status&&(n=t.data)},function(t){n={err:t.response.status,errMsg:t.response.message||"请检查网络是否正常",code:t.response.code}});case 6:return t.abrupt("return",b(n));case 7:case"end":return t.stop()}},t,this)})),function(t){return O.apply(this,arguments)});function E(t,e){return new d.a(function(n,r){var a={request:u()(e)},o=[];for(var i in a)o.push(i+"="+a[i]);var c=o.join("&"),s=new XMLHttpRequest;s.open("POST",t),s.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var t=JSON.parse(this.response);n(t)}else r(new Error("访问出错！"))},s.send(c)})}var P=window.Tracker||{},T=n("Zrlr"),A=n.n(T),N=n("wxAW"),_=n.n(N),L=function(){function t(e){A()(this,t),this.opts=e}return _()(t,[{key:"get",value:function(t){return sessionStorage.getItem(t)?JSON.parse(sessionStorage.getItem(t)):{}}},{key:"set",value:function(t,e){return sessionStorage.setItem(t,e),!0}},{key:"remove",value:function(t){return sessionStorage.removeItem(t),!0}},{key:"getStore",value:function(t){return localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):{}}},{key:"setStore",value:function(t,e){return localStorage.setItem(t,e),!0}},{key:"removeStore",value:function(t){return localStorage.removeItem(t),!0}}]),t}(),H=n("M4fF"),R=n.n(H),j=new L,C={name:"App",data:function(){return{request:w,ajax:E,store:j,COMMON:h}},methods:{sleep:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new d.a(function(e){return setTimeout(e,1e3*t)})},getSearchHistory:function(){return this.store.getStore("searchHistory")},setSearchHistory:function(t){var e=this.getSearchHistory();return e=R.a.uniqBy([t].concat(f()(e)),"name"),this.store.setStore("searchHistory",u()(e))},clearHistory:function(){return this.store.setStore("searchHistory","")}},mounted:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.dispatch("HandleCurrentPos"),window.yl.call("canPullDown",{canPullDown:!1});case 2:case"end":return e.stop()}},e,t)}))()},watch:{$route:function(t,e){P.logPv({pageName:"页面["+t.path+"-"+(t.meta.trackName||"-")+"]",to:t.path,from:e.path})}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var k,x=n("VU/8")(C,M,!1,function(t){n("ipy7")},null,null).exports,D=[{path:"",redirect:{name:"searchLine"}},{path:"/routeDetial",component:function(t){return Promise.all([n.e(0),n.e(8)]).then(function(){var e=[n("jJbA")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"routeDetial",meta:{title:"换乘详情",trackName:"换乘详情"}},{path:"/manageRoute",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){var e=[n("z9RS")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"manageRoute",meta:{title:"线路规划"}},{path:"/search",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){var e=[n("2QH8")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"search",meta:{title:"查询"}},{path:"/transfer",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){var e=[n("ThC4")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"transfer",meta:{title:"换乘查询"}},{path:"/searchLine",component:function(t){return Promise.all([n.e(0),n.e(6)]).then(function(){var e=[n("FqY8")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"searchLine",meta:{title:"附近站点",trackName:"附近站点"}},{path:"/searchLineDetails",component:function(t){return n.e(2).then(function(){var e=[n("80w0")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"searchLineDetails"},{path:"/lineDetails",component:function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){var e=[n("8iIu")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"lineDetails"},{path:"/lineLists",component:function(t){return n.e(7).then(function(){var e=[n("v5/9")];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"lineLists",meta:{title:"附近站点"}}],I=n("/ocq"),U=n("Au9i"),q=n.n(U),F=n("/IwO"),Y=n.n(F),X=n("7QTg"),z=n.n(X),G=(n("d8/S"),n("v2ns"),n("NYxO")),J=this,B={state:{currentPos:null,startObj:null,endObj:null,pos:{start:"出发地:我的位置",end:"目的地"}},mutations:{SET_CURRENT_POS:function(t,e){t.currentPos=e,e&&t.pos.start.indexOf("我的位置")?t.startObj=t.currentPos:e&&t.pos.end.indexOf("我的位置")&&(t.endObj=t.currentPos)},EXCHANGE_POS:function(t){var e=[t.pos.start,t.startObj],n=e[0],r=e[1];t.startObj=t.endObj,t.endObj=r,"我的位置"===t.pos.end?t.pos.start="出发地:我的位置":"目的地"===t.pos.end?t.pos.start="出发地":t.pos.start=t.pos.end,t.pos.end="出发地:我的位置"===n?"我的位置":"出发地"===n?"目的地":n},SET_END:function(t,e){t.endObj=e},SET_START:function(t,e){t.startObj=e},HANDLE_POS:function(t,e){t.pos=y()(t.pos,e)},HANDLE_CURRENT_POS:function(t,e){t.currentPos=e,e&&t.pos.start.indexOf("我的位置")?t.startObj=t.currentPos:e&&t.pos.end.indexOf("我的位置")&&(t.endObj=t.currentPos)}},actions:{SetCurrentPos:function(t,e){(0,t.commit)("SET_CURRENT_POS",e)},HandleCurrentPos:(k=c()(o.a.mark(function t(e){var n,r=e.commit;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,new d.a(function(t,e){window.yl.call("getLocation",{},{onSuccess:function(e){t(e.param)},onFail:function(t){e(t)}})});case 3:(n=t.sent).location=n.longitude+","+n.latitude,r("HANDLE_CURRENT_POS",n);case 6:case"end":return t.stop()}},t,J)})),function(t){return k.apply(this,arguments)}),ExchangePos:function(t){(0,t.commit)("EXCHANGE_POS")},SetStart:function(t,e){(0,t.commit)("SET_START",e)},SetEnd:function(t,e){(0,t.commit)("SET_END",e)},HandlePos:function(t,e){(0,t.commit)("HANDLE_POS",e)}}},Q={pos:function(t){return t.transfer.pos},startObj:function(t){return t.transfer.startObj},endObj:function(t){return t.transfer.endObj},policy:function(t){return t.line.policy},city:function(t){return t.line.city}};r.default.use(G.a);var $=new G.a.Store({modules:{transfer:B,line:{state:{city:"宝鸡市",policy:"LEAST_TRANSFER"},mutations:{HANDLE_POLICY:function(t,e){t.policy=e}},actions:{HandlePolicy:function(t,e){(0,t.commit)("HANDLE_POLICY",e)}}}},getters:Q}),W=n("/Hyb"),V=n.n(W),Z=n("6fN7"),K=n.n(Z);r.default.config.performance=!0,r.default.config.productionTip=!0,V.a.config("https://f39dd7a2cbd34f4ebcdc14db68bfdee6@sentry.io/1263965").addPlugin(K.a,r.default).install(),r.default.use(q.a),r.default.use(I.a),r.default.use(Y.a),Y.a.initAMapApiLoader({key:"80087a0431514fc08f05b6fabad3c8d5",plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor"],v:"1.4.4"});var tt=new I.a({routes:D});tt.beforeEach(function(t,e,n){n();try{window.yl.call("setTitleBarText",{title:t.meta.title})}catch(e){document.title=t.meta.title||"实时公交"}}),r.default.use(z.a,{}),new r.default({el:"#app",router:tt,store:$,render:function(t){return t(x)},renderError:function(t,e){return t("pre",{style:{color:"red"}},e.stack)}})},X2Oc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.urlQueryString=function(t){var e=new RegExp("[?&]s*"+t+"s*=([^&$#]*)","i").exec(location.search);if(e&&2===e.length)return decodeURIComponent(e[1])},e.hideLoading=function(){window.yl.call("hideLoading")},e.showLoading=function(t){t=a()({title:"加载中...",duration:3e3},t),window.yl.call("showLoading",{content:t.title,duration:t.duration},{onSuccess:function(t){}})};var r=n("woOf"),a=n.n(r)},bzuE:function(t,e,n){"use strict";e.a={baseURL:"http://ztmanage.allcitygo.com:8096/",baseBannerURL:"http://ztmanage.allcitygo.com:8092/",CITY_MAP_CENTER:[107.237703,34.362923],CITY_ID:"610300",CITY_NAME:"宝鸡市"}},"d8/S":function(t,e){},ipy7:function(t,e){},v2ns:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f7cff8094dd9bddbb3a0.js.map