{"version":3,"sources":["webpack:///src/views/lineDetails.vue","webpack:///./src/views/lineDetails.vue?09d6","webpack:///./src/views/lineDetails.vue"],"names":["lineDetails","components","Banner","data","location","this","$parent","store","get","latitude","config","CITY_MAP_CENTER","longitude","progressWidth","footerHeight","cityCode","CITY_ID","lineLists","timer","flags","timerID","direction","stationName","pageCode","banderUrl","baseBannerURL","methods","handleClick","name","that","getLineDetails2","setTimeout","changeDrection","setTitle","line","$route","query","lineName","Object","common","window","yl","call","title","onSuccess","a","onFail","getLineDetails","_this","asyncToGenerator_default","regenerator_default","mark","_callee","res","after","wrap","_context","prev","next","content","duration","request","url","lineId","sent","station","forEach","element","flag","station_name","$nextTick","length","$refs","stationLists","offsetHeight","stop","_this2","_callee2","_context2","success","code","abrupt","created","self","param","alert","mounted","rightButtonShow","rightButtonTextOpen","rightButtonText","setInterval","destroyed","clearInterval","clearTimeout","views_lineDetails","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","station_start","station_end","first_time","last_time","price_detail","directives","rawName","value","line_type","expression","attrs","seed","on","click","$event","_e","station_amount","distance","style","height","width","_l","list","index","key","class","ref","id","page-code","city-code","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.fa316d4f2d3118e55b81.js","sourcesContent":["<template>\n  <div class=\"line-container\">\n    <!-- 头部 -->\n    <div class=\"head\"\n         v-if=\"lineLists.line\">\n      <div class=\"rode-from-to\">\n        <div class=\"from\">{{lineLists.line.station_start}}</div>\n        <span class=\"icon\"></span>\n        <div class=\"to\">{{lineLists.line.station_end}}</div>\n      </div>\n      <div class=\"times\">\n        <div class=\"begin\">\n          <span class=\"icon\"></span>\n          <span class=\"text\">{{lineLists.line.first_time}}</span>\n        </div>\n        <div class=\"finish\">\n          <span class=\"icon\"></span>\n          <span class=\"text\">{{lineLists.line.last_time}}</span>\n        </div>\n        <div class=\"money\">票价:{{lineLists.line.price_detail || '无'}}</div>\n      </div>\n      <div class=\"right\"\n           seed=\"changeDrection\"\n           @click=\"changeDrection()\"\n           v-show=\"lineLists.line.line_type === 'double'\">\n        <div class=\"icon\"></div>\n        <div class=\"text\">换向</div>\n      </div>\n    </div>\n    <!-- 中部 -->\n    <div class=\"content\"\n         v-if=\"lineLists.line\">\n      <div class=\"con\">\n        <div class=\"no-station\"\n             v-if=\"lineLists.station_amount === '首站未发车'\">首站暂未发车</div>\n        <div class=\"station\"\n             v-else>\n          <div class=\"left\">\n            <div class=\"top\">{{lineLists.station_amount}}</div>\n            <div class=\"next\">{{lineLists.distance}}</div>\n          </div>\n          <div class=\"mid\">到达</div>\n          <div class=\"right\">{{lineLists.station_name}}</div>\n        </div>\n      </div>\n    </div>\n    <!-- 底部 -->\n    <div class=\"footer\"\n         :style=\"{height: footerHeight }\"\n         v-if=\"lineLists.station\">\n      <div class=\"progress-wrapper\">\n        <div class=\"progress\"\n             :style=\"{width: progressWidth + 'rem'}\">\n          <div class=\"progress-lines\">\n            <div class=\"progress-line\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"\n                 :class=\"`progress-line${list.after}`\"></div>\n          </div>\n          <div class=\"positions\">\n            <div class=\"position\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"\n                 :class=\"`position${list.flag}`\"></div>\n          </div>\n          <div class=\"cars\">\n            <div class=\"car\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"\n                 :class=\"`car-${list.car_out}${list.car_out_pass}`\"></div>\n          </div>\n          <div class=\"cars-in\">\n            <div class=\"car\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"\n                 :class=\"`car-${list.car_in}${list.car_in_pass}`\"></div>\n          </div>\n          <div class=\"dots\">\n            <div class=\"dot\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"\n                 :class=\"`dot${list.flag}`\"></div>\n          </div>\n          <div class=\"arrows\">\n            <div class=\"arrow\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"></div>\n          </div>\n          <div class=\"station-lists\"\n               id=\"station-lists\"\n               ref=\"stationLists\">\n            <div class=\"station-list\"\n                 v-for=\"(list,index) in lineLists.station\"\n                 :key=\"index\"\n                 :class=\"`station-list${list.flag}`\"\n                 seed=\"stationClick\"\n                 @click=\"flags && handleClick(list.name)\">{{list.name}}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"no-data\"\n         v-else>暂无数据</div>\n    <banner class=\"my-banner\"\n            :page-code=\"pageCode\"\n            :city-code=\"cityCode\"\n            :url=\"banderUrl\"\n            :size='10' />\n  </div>\n</template>\n<script>\nimport { urlQueryString } from '../utils/common.js'\nimport config from '../utils/config.js'\nimport Banner from '@/components/banner'\nexport default {\n  components: { Banner },\n  data () {\n    let location = this.$parent.store.get('location') || {}\n    let latitude = location.latitude || config.CITY_MAP_CENTER[1]\n    let longitude = location.longitude || config.CITY_MAP_CENTER[0]\n    return {\n      progressWidth: 10,\n      footerHeight: '10 rem',\n      cityCode: config.CITY_ID,\n      latitude: latitude,\n      longitude: longitude,\n      lineLists: {},\n      timer: null,\n      flags: true,\n      timerID: null,\n      direction: null,\n      stationName: null,\n      pageCode: '610300003',\n      banderUrl: config.baseBannerURL + 'tcapp/ads/classify'\n    }\n  },\n  methods: {\n    // 点击站点名\n    handleClick (name) {\n      let that = this\n      if (this.flags) {\n        let direction = this.lineLists.direction || 0\n        this.stationName = name\n        this.getLineDetails2(direction, name)\n      }\n      this.flags = false\n      this.timerID = setTimeout(function () {\n        console.log(this.flags)\n        that.flags = true\n      }, 1000)\n    },\n    // 点击换向\n    changeDrection () {\n      let direction = this.lineLists.direction\n      if (direction === 0) {\n        direction = 1\n      } else {\n        direction = 0\n      }\n      this.direction = direction\n      // console.log(direction)\n      this.getLineDetails2(direction, this.stationName || '')\n    },\n    // 设置标题\n    setTitle () {\n      let line = this.$route.query.lineName || urlQueryString('lineName')\n      if (line) {\n        window.yl.call(\n          'setTitleBarText',\n          {\n            title: `${line}详情`\n          },\n          {\n            onSuccess: function (a) {\n              // alert('success')\n            },\n            onFail: function (a) {\n              // alert('fail')\n            }\n          }\n        )\n      }\n    },\n    // 获取线路详细信息\n    async getLineDetails () {\n      window.yl.call(\n        'showLoading',\n        {\n          content: '加载中…',\n          duration: 15000\n        },\n        {\n          onSuccess: function (a) {\n            // alert('success')\n          },\n          onFail: function (a) {\n            // alert('fail')\n          }\n        }\n      )\n      let res = await this.$parent.request({\n        url: `line/detail_by_line_id?lng=${this.longitude}&lat=${\n          this.latitude\n        }&line_id=${this.$route.query.lineId}&direction=${\n          this.direction || 0\n        }&city_code=${this.cityCode}&station_name=${this.stationName || ''}`\n        // url: `line/detail_by_line_id?lng=107.13&lat=34.37&line_id=${\n        //   this.$route.query.lineId\n        // }&direction=${this.$route.query.direction || 0}&city_code=${\n        //   this.cityCode\n        // }&station_name=${this.$route.query.stationName || ''}`\n      })\n      // console.log(res)\n      if (res) {\n        let after = 0\n        res.station.forEach(element => {\n          if (element.flag) {\n            after = 1\n          }\n          element.after = after\n        })\n        this.lineLists = res\n        this.stationName = this.stationName || this.lineLists.station_name\n        console.log(this.stationName)\n      }\n      // alert(JSON.stringify(res))\n      this.$nextTick(() => {\n        if (this.lineLists && this.lineLists.station) {\n          this.progressWidth =\n            (this.lineLists.station.length - 1) * 90 / 75 +\n            this.lineLists.station.length * 10 / 75\n          this.$nextTick(() => {\n            this.footerHeight = (70 + this.$refs.stationLists.offsetHeight) + 'px' // this.$refs.stationLists.height\n            console.log('this.footerHeight ' + this.footerHeight)\n          })\n        }\n      })\n      window.yl.call('hideLoading')\n    },\n    // 获取线路详细信息\n    async getLineDetails2 (direction, stationName) {\n      window.yl.call(\n        'showLoading',\n        {\n          content: '加载中…',\n          duration: 15000\n        },\n        {\n          onSuccess: function (a) {\n            // alert('success')\n          },\n          onFail: function (a) {\n            // alert('fail')\n          }\n        }\n      )\n      let res = await this.$parent.request({\n        // url: `line/detail_by_line_id?lng=${this.longitude}&lat=${this.latitude}&line_id=${this.$route.query.lineId\n        // }&direction=${direction}&city_code=${this.cityCode}&station_name=${stationName}`\n        url: `line/detail_by_line_id?lng=107.13&lat=34.37&line_id=${\n          this.$route.query.lineId\n        }&direction=${direction}&city_code=${\n          this.cityCode\n        }&station_name=${stationName}`\n      })\n      console.log('getLineDetails2 ', res)\n      if (res && res.success) {\n        let after = 0\n        res.station.forEach(element => {\n          if (element.flag) {\n            after = 1\n          }\n          element.after = after\n        })\n        this.lineLists = res\n        this.stationName = this.stationName || this.lineLists.station_name\n        console.log(this.stationName)\n      } else {\n        if (this.stationName && res.code === '20') {\n          this.stationName = null\n          this.getLineDetails()\n          return\n        }\n      }\n      // alert(JSON.stringify(res))\n      console.log(document.querySelector('.station-lists').offsetWidth)\n      this.$nextTick(() => {\n        if (this.lineLists.station) {\n          this.progressWidth =\n            (this.lineLists.station.length - 1) * 90 / 75 +\n            this.lineLists.station.length * 10 / 75\n          this.footerHeight = (70 + this.$refs.stationLists.offsetHeight) + 'px' // this.$refs.stationLists.height\n          console.log('this.footerHeight ' + this.footerHeight)\n        }\n      })\n      window.yl.call('hideLoading')\n    }\n  },\n  created () {\n    this.setTitle()\n    let self = this\n    this.direction = this.$route.query.direction\n    this.stationName = this.$route.query.stationName\n    // 获取位置\n    window.yl.call(\n      'getLocation',\n      {},\n      {\n        onSuccess: function (res) {\n          // this.getStation()\n          // alert(JSON.stringify(res.param))\n          if (res.param) {\n            self.latitude = res.param.latitude\n            self.longitude = res.param.longitude\n            // alert(1)\n          }\n        },\n        onFail: function (res) {\n          alert('获取地理位置失败')\n        }\n      }\n    )\n    this.getLineDetails()\n  },\n  mounted () {\n    let that = this\n    window.yl.call(\n      'setTitleBarRightButton',\n      {\n        rightButtonShow: true,\n        rightButtonTextOpen: true,\n        rightButtonText: '刷新' // 优先展示图标、其次是文字，两者选一个\n      },\n      {\n        onSuccess: function (a) {\n          that.getLineDetails()\n        },\n        onFail: function (a) {\n          alert('fail')\n        }\n      }\n    )\n    this.timer = setInterval(function () {\n      that.getLineDetails()\n    }, 30000)\n  },\n  destroyed () {\n    clearInterval(this.timer)\n    clearTimeout(this.timerID)\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.line-container {\n  //   width: 100%;\n  font-family: PingFangSC-Regular;\n  .no-data {\n    width: 100%;\n    text-align: center;\n    margin: 100px auto;\n    font-family: PingFangSC-Regular;\n    font-size: 16px;\n    color: #595d60;\n    height: 0.586667rem;\n    line-height: 0.586667rem;\n  }\n  .progress-wrapper {\n    float: left;\n  }\n  .my-banner {\n    width: 91%;\n    margin-left: 4.5%;\n  }\n  .head {\n    position: relative;\n    width: 100%;\n    height: 2.186667rem;\n    padding: 0.426667rem;\n    box-sizing: border-box;\n    border-bottom: 1px solid #d9d9d9;\n    background: #fff;\n    .rode-from-to {\n      .from,\n      .to {\n        display: inline-block;\n        height: 0.533333rem;\n        line-height: 0.533333rem;\n        font-family: PingFangSC-Regular;\n        font-size: 14px;\n        color: #505064;\n      }\n      .icon {\n        display: inline-block;\n        width: 0.586667rem;\n        height: 0.24rem;\n        margin-left: 0.133333rem;\n        background: url(\"../assets/jiantou@3x.png\") no-repeat;\n        background-size: contain;\n      }\n      .to {\n        margin-left: 0.133333rem;\n      }\n    }\n    .times {\n      margin-top: 0.213333rem;\n      .begin {\n        display: inline-block;\n        .icon {\n          display: inline-block;\n          vertical-align: top;\n          width: 0.48rem;\n          height: 0.48rem;\n          background: url(\"../assets/images/shou@3x.png\") no-repeat;\n          background-size: contain;\n        }\n        .text {\n          display: inline-block;\n          height: 0.533333rem;\n          line-height: 0.533333rem;\n          font-size: 14px;\n          color: #a2a2a2;\n        }\n      }\n      .finish {\n        display: inline-block;\n        margin-left: 5px;\n        .icon {\n          display: inline-block;\n          vertical-align: top;\n          width: 0.48rem;\n          height: 0.48rem;\n          background: url(\"../assets/images/mo@3x.png\") no-repeat;\n          background-size: contain;\n        }\n        .text {\n          display: inline-block;\n          height: 0.533333rem;\n          line-height: 0.533333rem;\n          font-size: 14px;\n          color: #a2a2a2;\n        }\n      }\n      .money {\n        display: inline-block;\n        margin-left: 5px;\n        height: 0.533333rem;\n        line-height: 0.533333rem;\n        font-size: 14px;\n        color: #a2a2a2;\n      }\n    }\n    .right {\n      position: absolute;\n      top: 0.52rem;\n      right: 0.426667rem;\n      .icon {\n        width: 0.72rem;\n        height: 0.72rem;\n        background: url(\"../assets/images/commutation@3x.png\") no-repeat;\n        background-size: contain;\n      }\n      .text {\n        margin-top: 0.053333rem;\n        font-family: PingFangSC-Regular;\n        font-size: 10px;\n        color: #a2a2a2;\n        text-align: center;\n      }\n    }\n  }\n  .content {\n    position: relative;\n    width: 100%;\n    // padding: 0.253333rem 0.426667rem 0 0.426667rem;\n    // box-sizing: border-box;\n    .con {\n      vertical-align: top;\n      position: relative;\n      width: 9.146667rem;\n      height: 2.72rem;\n      background: url(../assets/images/frame@3x.png) no-repeat;\n      background-size: 9.146667rem 2.72rem;\n      margin: 0.253333rem auto 0 auto;\n      .no-station {\n        position: absolute;\n        top: 0.946667rem;\n        left: 50%;\n        transform: translateX(-50%);\n        text-align: center;\n        font-size: 16px;\n        color: #a2a2a2;\n      }\n      .left {\n        position: absolute;\n        top: 0.653333rem;\n        left: 0.933333rem;\n        .top {\n          font-family: PingFangSC-Regular;\n          font-size: 16px;\n          color: #0079c5;\n          text-align: center;\n          height: 0.6rem;\n          line-height: 0.6rem;\n        }\n        .next {\n          font-size: 12px;\n          color: #a2a2a2;\n          text-align: center;\n          height: 0.44rem;\n          line-height: 0.44rem;\n        }\n      }\n      .mid {\n        position: absolute;\n        top: 1.026667rem;\n        left: 3.6rem;\n        font-size: 12px;\n        color: #a2a2a2;\n        text-align: center;\n        height: 0.44rem;\n        line-height: 0.44rem;\n      }\n      .right {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-72%);\n        left: 4.96rem;\n        width: 137px;\n        text-align: center;\n        color: #303033;\n        font-size: 14px;\n      }\n    }\n  }\n  .footer {\n    position: relative;\n    margin-top: 0rem;\n    overflow-x: scroll;\n    // -webkit-overflow-scrolling: touch;\n    height: 11.92rem;\n    &::-webkit-scrollbar {\n      width: 0;\n    }\n    .progress {\n      position: relative;\n      //宽不确定\n      // width: 10rem;\n      height: 0.133333rem;\n      background: #d8d8d8;\n      border-radius: 10px;\n      margin: 38px 0.426667rem 0 0.426667rem;\n      .progress-lines {\n        line-height: 0;\n        position: absolute;\n        left: 0;\n        .progress-line {\n          display: inline-block;\n          width: 1.33333rem;\n          height: 0.133333rem;\n          box-sizing: border-box;\n          &:nth-child(1) {\n            margin-left: 0px;\n          }\n          &:nth-last-child(1) {\n            width: 0rem;\n          }\n        }\n        .progress-line1 {\n          background: #00a0e8;\n        }\n      }\n      .positions {\n        line-height: 0;\n        position: absolute;\n        top: -0.506667rem;\n        left: 0;\n        z-index: 100;\n        .position {\n          display: inline-block;\n          width: 0.48rem;\n          height: 0.48rem;\n          box-sizing: border-box;\n          // background: url('../assets/images/rechargebox@3x.png') no-repeat;\n          // background-size: 0.48rem 0.48rem;\n          margin-left: 0.853333rem;\n          &:nth-child(1) {\n            margin-left: -0.16rem;\n          }\n          &:nth-last-child(1) {\n            position: absolute;\n            right: -1.3rem;\n          }\n        }\n        .position1 {\n          background: url(\"../assets/images/rechargebox@3x.png\") no-repeat;\n          background-size: 0.48rem 0.48rem;\n        }\n      }\n      .cars {\n        line-height: 0;\n        position: absolute;\n        top: -0.4rem;\n        left: 0;\n        .car {\n          display: inline-block;\n          width: 0.8rem;\n          height: 0.4rem;\n          // background: url('../assets/images/busweidao@3x.png') no-repeat;\n          // background-size: contain;\n          margin-left: 0.533333rem;\n          box-sizing: border-box;\n          &:nth-child(1) {\n            margin-left: 0.346667rem;\n          }\n          &:nth-last-child(1) {\n            display: none;\n          }\n        }\n        .car-1on {\n          background: url(\"../assets/images/busweidao@3x.png\") no-repeat;\n          background-size: contain;\n        }\n        .car-1pass {\n          background: url(\"../assets/images/busguo@3x.png\") no-repeat;\n          background-size: contain;\n        }\n      }\n      .cars-in {\n        line-height: 0;\n        position: absolute;\n        top: -0.4rem;\n        left: -0.666667rem;\n        .car {\n          display: inline-block;\n          width: 0.8rem;\n          height: 0.4rem;\n          // background: url('../assets/images/busweidao@3x.png') no-repeat;\n          // background-size: contain;\n          margin-left: 0.533333rem;\n          box-sizing: border-box;\n          &:nth-child(1) {\n            // display: none;\n            margin-left: 0.346667rem;\n          }\n          &:nth-last-child(1) {\n            display: none;\n          }\n        }\n        .car-1on {\n          background: url(\"../assets/images/busweidao@3x.png\") no-repeat;\n          background-size: contain;\n        }\n        .car-1pass {\n          background: url(\"../assets/images/busguo@3x.png\") no-repeat;\n          background-size: contain;\n        }\n      }\n      .dots {\n        position: absolute;\n        top: 0;\n        left: 0;\n        line-height: 0;\n        .dot {\n          vertical-align: top;\n          display: inline-block;\n          width: 0.133333rem;\n          height: 0.133333rem;\n          background: #d8d8d8;\n          border: 1px solid #ffffff;\n          border-radius: 50%;\n          box-sizing: border-box;\n          z-index: 5;\n          margin-left: 1.2rem;\n          &:nth-child(1) {\n            margin-left: 0;\n          }\n          &:nth-last-child(1) {\n            right: -1.3rem;\n          }\n        }\n        .dot1 {\n          background: #00a0e9;\n        }\n      }\n      .arrows {\n        line-height: 0;\n        position: absolute;\n        top: 0;\n        left: 0;\n        .arrow {\n          vertical-align: top;\n          display: inline-block;\n          width: 0.133333rem;\n          height: 0.133333rem;\n          background: url(\"../assets/images/row.png\") no-repeat;\n          background-size: contain;\n          margin-left: 1.2rem;\n          box-sizing: border-box;\n          z-index: 5;\n          &:nth-child(1) {\n            margin-left: 0.733333rem;\n          }\n        }\n      }\n      .station-lists {\n        position: absolute;\n        top: 0.453333rem;\n        // margin-top: 0px;\n        left: 0;\n        .station-list {\n          vertical-align: top;\n          display: inline-block;\n          width: 0.426667rem;\n          font-size: 16px;\n          color: #303033;\n          text-align: center;\n          margin-left: 0.906667rem;\n          &:nth-child(1) {\n            margin-left: 0;\n          }\n          &:nth-child(2) {\n            margin-left: 0.756667rem;\n          }\n          &:nth-last-child(1) {\n            margin-left: 0.7rem;\n          }\n        }\n        .station-list1 {\n          color: #00a0e9;\n        }\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/lineDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"line-container\"},[(_vm.lineLists.line)?_c('div',{staticClass:\"head\"},[_c('div',{staticClass:\"rode-from-to\"},[_c('div',{staticClass:\"from\"},[_vm._v(_vm._s(_vm.lineLists.line.station_start))]),_vm._v(\" \"),_c('span',{staticClass:\"icon\"}),_vm._v(\" \"),_c('div',{staticClass:\"to\"},[_vm._v(_vm._s(_vm.lineLists.line.station_end))])]),_vm._v(\" \"),_c('div',{staticClass:\"times\"},[_c('div',{staticClass:\"begin\"},[_c('span',{staticClass:\"icon\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.lineLists.line.first_time))])]),_vm._v(\" \"),_c('div',{staticClass:\"finish\"},[_c('span',{staticClass:\"icon\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.lineLists.line.last_time))])]),_vm._v(\" \"),_c('div',{staticClass:\"money\"},[_vm._v(\"票价:\"+_vm._s(_vm.lineLists.line.price_detail || '无'))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lineLists.line.line_type === 'double'),expression:\"lineLists.line.line_type === 'double'\"}],staticClass:\"right\",attrs:{\"seed\":\"changeDrection\"},on:{\"click\":function($event){_vm.changeDrection()}}},[_c('div',{staticClass:\"icon\"}),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_vm._v(\"换向\")])])]):_vm._e(),_vm._v(\" \"),(_vm.lineLists.line)?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"con\"},[(_vm.lineLists.station_amount === '首站未发车')?_c('div',{staticClass:\"no-station\"},[_vm._v(\"首站暂未发车\")]):_c('div',{staticClass:\"station\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"top\"},[_vm._v(_vm._s(_vm.lineLists.station_amount))]),_vm._v(\" \"),_c('div',{staticClass:\"next\"},[_vm._v(_vm._s(_vm.lineLists.distance))])]),_vm._v(\" \"),_c('div',{staticClass:\"mid\"},[_vm._v(\"到达\")]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_vm._v(_vm._s(_vm.lineLists.station_name))])])])]):_vm._e(),_vm._v(\" \"),(_vm.lineLists.station)?_c('div',{staticClass:\"footer\",style:({height: _vm.footerHeight })},[_c('div',{staticClass:\"progress-wrapper\"},[_c('div',{staticClass:\"progress\",style:({width: _vm.progressWidth + 'rem'})},[_c('div',{staticClass:\"progress-lines\"},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"progress-line\",class:(\"progress-line\" + (list.after))})}),0),_vm._v(\" \"),_c('div',{staticClass:\"positions\"},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"position\",class:(\"position\" + (list.flag))})}),0),_vm._v(\" \"),_c('div',{staticClass:\"cars\"},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"car\",class:(\"car-\" + (list.car_out) + (list.car_out_pass))})}),0),_vm._v(\" \"),_c('div',{staticClass:\"cars-in\"},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"car\",class:(\"car-\" + (list.car_in) + (list.car_in_pass))})}),0),_vm._v(\" \"),_c('div',{staticClass:\"dots\"},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"dot\",class:(\"dot\" + (list.flag))})}),0),_vm._v(\" \"),_c('div',{staticClass:\"arrows\"},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"arrow\"})}),0),_vm._v(\" \"),_c('div',{ref:\"stationLists\",staticClass:\"station-lists\",attrs:{\"id\":\"station-lists\"}},_vm._l((_vm.lineLists.station),function(list,index){return _c('div',{key:index,staticClass:\"station-list\",class:(\"station-list\" + (list.flag)),attrs:{\"seed\":\"stationClick\"},on:{\"click\":function($event){_vm.flags && _vm.handleClick(list.name)}}},[_vm._v(_vm._s(list.name))])}),0)])])]):_c('div',{staticClass:\"no-data\"},[_vm._v(\"暂无数据\")]),_vm._v(\" \"),_c('banner',{staticClass:\"my-banner\",attrs:{\"page-code\":_vm.pageCode,\"city-code\":_vm.cityCode,\"url\":_vm.banderUrl,\"size\":10}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6122b3fc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/lineDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6122b3fc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./lineDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./lineDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./lineDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6122b3fc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./lineDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6122b3fc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/lineDetails.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}